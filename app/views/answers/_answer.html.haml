.answer{id: "answer-#{answer.id}"}
  .panel.panel-primary
    .panel-heading= answer.best ? "Best answer" : "answer"
    .panel-body
      .row
        .col-md-2

          .rate-answer-errors
          - if user_signed_in? && !current_user.author_of?(answer)
            = link_to '+', polymorphic_path([:rate, answer]), remote: true, class: 'btn btn-success btn-rate-answer', method: :patch
            .rating-answer= answer.rating
            = link_to '-', polymorphic_path([:rate, answer], negative: true), remote: true, class: 'btn btn-danger btn-rate-answer', method: :patch

            .col-12
              Your rate:
              .current-user-rate-answer{ rate: "#{current_user.rate_of(answer)}" }= current_user.rate_of(answer)
              = link_to 'Cancel rate', polymorphic_path([:cancel_rate, answer]), remote: true, class: 'btn btn-default btn-cancel-rate-answer', method: :patch

        .col-md-10
          = answer.body.html_safe
          - if user_signed_in? && current_user.author_of?(@question) && !answer.best
            = link_to 'Best answer', question_answer_set_best_path(question_id: @question, answer_id: answer), class: 'btn btn-primary', remote: true, method: :patch

          - if user_signed_in? && current_user.author_of?(answer)
            = link_to 'Delete', question_answer_path(@question, answer), method: :delete, data: { confirm: 'Are you sure?' }, remote: true
            = link_to 'Edit', '', class: 'edit-answer-link', data: { answer_id: answer.id }


      %p Attachments:
      %ul
        - answer.attachments.each do |attachment|
          .attachment{id: "attachment-#{attachment.id}"}
            %li= link_to attachment.file.identifier, attachment.file.url
            - if user_signed_in? && current_user.author_of?(answer) && attachment.persisted?
              .delete_answer_file= link_to 'Delete', attachment, method: :delete, data: { confirm: 'Are you sure?' }, remote: true



        = form_for [@question, answer], remote: true, html: { id: "edit-answer-#{answer.id}"}  do |f|
          .well
            = f.label :body, 'Answer'
            = f.text_area :body, class: "form-control"
            = f.submit 'Update', class: "btn btn-primary"

